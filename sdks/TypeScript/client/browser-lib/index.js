"use strict";(()=>{var k=Object.defineProperty;var v=(n,e)=>{for(var t in e)k(n,t,{get:e[t],enumerable:!0})};var g=(n,e,t)=>new Promise((s,o)=>{var p=r=>{try{d(t.next(r))}catch(c){o(c)}},R=r=>{try{d(t.throw(r))}catch(c){o(c)}},d=r=>r.done?s(r.value):Promise.resolve(r.value).then(p,R);d((t=t.apply(n,e)).next())});var y={};v(y,{default:()=>I,del:()=>A,get:()=>a,post:()=>i,postFormData:()=>E,stringify_query:()=>h});var m;function _(n){m=n}function u(n,e){let t=m+n;return console.log(["fetch_url",t]),fetch(t,e).then(o=>g(this,null,function*(){switch(console.log(o),o.status){case 200:return o.json();default:return o.json().then(p=>({error:!0,status:o.status,body:p}))}}))}function a(n,e){let t={Accept:"application/json","Content-Type":"application/json"};return e.session_token&&(t["X-Access-Token"]=e.session_token),u(n,{headers:t})}function i(n,e,t){let s=t?JSON.stringify(t):"null",o={Accept:"application/json","Content-Type":"application/json"};return e.session_token&&(o["X-Access-Token"]=e.session_token),u(n,{method:"POST",body:s,headers:o})}function A(n,e){let t={Accept:"application/json","Content-Type":"application/json"};return e.session_token&&(t["X-Access-Token"]=e.session_token),u(n,{method:"DELETE",headers:t})}function E(n,e,t){return g(this,null,function*(){let s={Accept:"application/json"};return e.session_token&&(s["X-Access-Token"]=e.session_token),u(n,{method:"POST",body:t,headers:s})})}function C(n,e,t){t!=null&&n.push([encodeURIComponent(e),encodeURIComponent(t)])}var l=class{constructor(e){this.params=e}url_encode(){let e=[];for(let t in this.params){let s=this.params[t];if(s!==null){if(typeof s=="string"||typeof s=="number"||typeof s=="boolean"){C(e,t,s.toString());continue}if(Array.isArray(s)){if(s.length>0&&(typeof s[0]=="string"||typeof s[0]=="number"||typeof s[0]=="boolean")){C(e,t,s.join(","));continue}throw"url_encode not implemented for "+typeof s+" "+JSON.stringify(s)}if(typeof s=="object"&&s.hasOwnProperty("url_encode"))for(let[o,p]of s.url_encode())e.push([`${t}.${o}`,p]);throw"url_encode not implemented for "+typeof s+" "+JSON.stringify(s)}}return e}};function h(n){let e=new l(n).url_encode();return console.log(["stringify_query",e]),e.length>0?`?${e.map(([t,s])=>`${t}=${s}`).join("&")}`:""}var I={get:a,post:i,postFormData:E};var x={};var f={};v(f,{get_connection_events:()=>b,get_conversation_events:()=>S,mark_read:()=>j,send_message:()=>U,start_typing:()=>P,stop_typing:()=>M});function b(n){return a("/events",n)}function S(n,e){return a(`/conversation/${e}/events`,n)}function U(n,e,t){return i(`/conversation/${e}`,n,t)}function P(n,e,t){return i(`/conversation/${e}/start-typing`,n,t)}function M(n,e,t){return i(`/conversation/${e}/stop-typing`,n,t)}function j(n,e){return i("/read",n,e)}var D={init:_,Types:x,Endpoints:f,Utils:y},T=D;window.RustSimpleChatClient=T;})();
//# sourceMappingURL=index.js.map
