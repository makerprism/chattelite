"use strict";(()=>{var k=Object.defineProperty;var v=(n,e)=>{for(var t in e)k(n,t,{get:e[t],enumerable:!0})};var g=(n,e,t)=>new Promise((o,s)=>{var p=r=>{try{c(t.next(r))}catch(d){s(d)}},R=r=>{try{c(t.throw(r))}catch(d){s(d)}},c=r=>r.done?o(r.value):Promise.resolve(r.value).then(p,R);c((t=t.apply(n,e)).next())});var y={};v(y,{default:()=>I,del:()=>A,get:()=>a,post:()=>i,postFormData:()=>E,stringify_query:()=>h});var m;function _(n){m=n}function u(n,e){let t=m+n;return console.log(["fetch_url",t]),fetch(t,e).then(s=>g(this,null,function*(){switch(console.log(s),s.status){case 200:return s.json();default:return s.json().then(p=>({error:!0,status:s.status,body:p}))}}))}function a(n,e){let t={Accept:"application/json","Content-Type":"application/json"};return e.session_token&&(t["X-Access-Token"]=e.session_token),u(n,{headers:t})}function i(n,e,t){let o=t?JSON.stringify(t):"null",s={Accept:"application/json","Content-Type":"application/json"};return e.session_token&&(s["X-Access-Token"]=e.session_token),u(n,{method:"POST",body:o,headers:s})}function A(n,e){let t={Accept:"application/json","Content-Type":"application/json"};return e.session_token&&(t["X-Access-Token"]=e.session_token),u(n,{method:"DELETE",headers:t})}function E(n,e,t){return g(this,null,function*(){let o={Accept:"application/json"};return e.session_token&&(o["X-Access-Token"]=e.session_token),u(n,{method:"POST",body:t,headers:o})})}function C(n,e,t){t!=null&&n.push([encodeURIComponent(e),encodeURIComponent(t)])}var l=class{constructor(e){this.params=e}url_encode(){let e=[];for(let t in this.params){let o=this.params[t];if(o!==null){if(typeof o=="string"||typeof o=="number"||typeof o=="boolean"){C(e,t,o.toString());continue}if(Array.isArray(o)){if(o.length>0&&(typeof o[0]=="string"||typeof o[0]=="number"||typeof o[0]=="boolean")){C(e,t,o.join(","));continue}throw"url_encode not implemented for "+typeof o+" "+JSON.stringify(o)}if(typeof o=="object"&&o.hasOwnProperty("url_encode"))for(let[s,p]of o.url_encode())e.push([`${t}.${s}`,p]);throw"url_encode not implemented for "+typeof o+" "+JSON.stringify(o)}}return e}};function h(n){let e=new l(n).url_encode();return console.log(["stringify_query",e]),e.length>0?`?${e.map(([t,o])=>`${t}=${o}`).join("&")}`:""}var I={get:a,post:i,postFormData:E};var x={};var f={};v(f,{get_connection_events:()=>b,get_conversation_events:()=>S,mark_read:()=>j,send_message:()=>P,start_typing:()=>U,stop_typing:()=>M});function b(n){return a("/events",n)}function S(n,e){return a(`/conversation/${e}/events`,n)}function P(n,e,t){return i(`/conversation/${e}`,n,t)}function U(n,e,t){return i(`/conversation/${e}/start-typing`,n,t)}function M(n,e,t){return i(`/conversation/${e}/stop-typing`,n,t)}function j(n,e){return i("/read",n,e)}var D={init:_,Types:x,Endpoints:f,Utils:y},T=D;window.RustSimpleChatClient=T;})();
//# sourceMappingURL=index.js.map
