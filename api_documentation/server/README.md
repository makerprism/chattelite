<!-- AUTOMATICALLY GENERATED BY codegen/main.ml -->

# Types

## UserId

is an ID type (String)

## UserCursor

is a Cursor type (String)

## ConversationId

is an ID type (String)

## ConversationCursor

is a Cursor type (String)

## LineId

is an ID type (String)

## <a name="DateTime">DateTime</a>

  is an alias for String

## <a name="User">User</a>

is a struct with these fields:
|name|type|
|-|-|
|display_name|String|
|user_id|[UserId](#UserId)|

## <a name="PaginatedUsers">PaginatedUsers</a>

is a struct with these fields:
|name|type|
|-|-|
|next|Optional ([UserCursor](#UserCursor))|
|prev|Optional ([UserCursor](#UserCursor))|
|objs|Array of ([User](#User))|

## <a name="ParentLine">ParentLine</a>

is a struct with these fields:
|name|type|
|-|-|
|line_id|[LineId](#LineId)|
|timestamp|[DateTime](#DateTime)|
|from|[User](#User)|
|message|String|
|data|String|

## <a name="Line">Line</a>

is a struct with these fields:
|name|type|
|-|-|
|line_id|[LineId](#LineId)|
|timestamp|[DateTime](#DateTime)|
|from|[User](#User)|
|message|String|
|data|String|
|reply_to_line|Nullable ([LineId](#LineId))|

## <a name="Thread">Thread</a>

is a struct with these fields:
|name|type|
|-|-|
|line|[Line](#Line)|
|replies|Array of ([Line](#Line))|

## <a name="ConversationEvent">ConversationEvent</a>

  is one of these variants:

* `ConversationEventNewLine`

|field_name|type|
|-|-|
|line|[Line](#Line)|

* `ConversationEventJoin`

|field_name|type|
|-|-|
|timestamp|[DateTime](#DateTime)|
|from|[User](#User)|

* `ConversationEventLeave`

|field_name|type|
|-|-|
|timestamp|[DateTime](#DateTime)|
|from|[User](#User)|

* `ConversationEventStartTyping`

|field_name|type|
|-|-|
|timestamp|[DateTime](#DateTime)|
|from|[User](#User)|

* `ConversationEventEndTyping`

|field_name|type|
|-|-|
|timestamp|[DateTime](#DateTime)|
|from|[User](#User)|


## <a name="Conversation">Conversation</a>

is a struct with these fields:
|name|type|
|-|-|
|conversation_id|[ConversationId](#ConversationId)|
|timestamp|[DateTime](#DateTime)|
|number_of_unread_messages|Integer|
|newest_line|Nullable ([Line](#Line))|

## <a name="PaginatedConversations">PaginatedConversations</a>

is a struct with these fields:
|name|type|
|-|-|
|next|Optional ([ConversationCursor](#ConversationCursor))|
|prev|Optional ([ConversationCursor](#ConversationCursor))|
|objs|Array of ([Conversation](#Conversation))|

# Endpoints

## <a name="create_user">create_user</a>

create a new user

POST /_/users

Input body:
  |name|type|
  |-|-|
  |display_name|String|
  |user_id|[UserId](#UserId)|

Response body:
  |name|type|
  |-|-|
  |user_id|[UserId](#UserId)|

## <a name="users">users</a>

list users

GET /_/users

Query Parameters:
  |name|type|
  |-|-|
  |name|Optional (String)|
  |next|Optional ([UserCursor](#UserCursor))|
  |prev|Optional ([UserCursor](#UserCursor))|
  |limit|Optional (Integer)|

Response body:
  |name|type|
  |-|-|
  |users|[PaginatedUsers](#PaginatedUsers)|

## <a name="get_user">get_user</a>

get user by id

GET /_/user/{user_id}

URL params:
  |name|type|
  |-|-|
  |user_id|[UserId](#UserId)|

Response body:
  |name|type|
  |-|-|
  |user|[User](#User)|

## <a name="delete_user">delete_user</a>

delete user by id

DELETE /_/user/{user_id}

URL params:
  |name|type|
  |-|-|
  |user_id|[UserId](#UserId)|

## <a name="generate_client_jwt">generate_client_jwt</a>

generate a JWT that authenticated the user with given [user_id]

POST /_/gen-client-jwt

Input body:
  |name|type|
  |-|-|
  |user_id|[UserId](#UserId)|

Response body:
  |name|type|
  |-|-|
  |jwt|String|

## <a name="create_conversation">create_conversation</a>

create a new conversation

POST /_/converations

Input body:
  |name|type|
  |-|-|
  |user_ids|Array of ([UserId](#UserId))|
  |data|String|

Response body:
  |name|type|
  |-|-|
  |conversation_id|[ConversationId](#ConversationId)|

## <a name="update_converstaion">update_converstaion</a>

update data on a conversation

POST /_/converation/{conversation_id}

URL params:
  |name|type|
  |-|-|
  |conversation_id|[ConversationId](#ConversationId)|

Input body:
  |name|type|
  |-|-|
  |data|String|

## <a name="add_users_to_conversation">add_users_to_conversation</a>

add users to an existing conversation

POST /_/converation/{conversation_id}/add-users

URL params:
  |name|type|
  |-|-|
  |conversation_id|[ConversationId](#ConversationId)|

Input body:
  |name|type|
  |-|-|
  |user_ids|Array of ([UserId](#UserId))|

## <a name="remove_users_from_conversation">remove_users_from_conversation</a>

remove users from a conversation

POST /_/converation/{conversation_id}/remove-users

URL params:
  |name|type|
  |-|-|
  |conversation_id|[ConversationId](#ConversationId)|

Input body:
  |name|type|
  |-|-|
  |user_ids|Array of ([UserId](#UserId))|